// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: connector_configs.sql

package gen

import (
	"context"
)

const getConnectorConfig = `-- name: GetConnectorConfig :one
SELECT kind, enabled, config, created_at, updated_at
FROM connector_configs
WHERE kind = $1
`

func (q *Queries) GetConnectorConfig(ctx context.Context, kind string) (ConnectorConfig, error) {
	row := q.db.QueryRow(ctx, getConnectorConfig, kind)
	var i ConnectorConfig
	err := row.Scan(
		&i.Kind,
		&i.Enabled,
		&i.Config,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listConnectorConfigs = `-- name: ListConnectorConfigs :many
SELECT kind, enabled, config, created_at, updated_at
FROM connector_configs
ORDER BY kind
`

func (q *Queries) ListConnectorConfigs(ctx context.Context) ([]ConnectorConfig, error) {
	rows, err := q.db.Query(ctx, listConnectorConfigs)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ConnectorConfig
	for rows.Next() {
		var i ConnectorConfig
		if err := rows.Scan(
			&i.Kind,
			&i.Enabled,
			&i.Config,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateConnectorConfig = `-- name: UpdateConnectorConfig :one
UPDATE connector_configs
SET config = $2, updated_at = now()
WHERE kind = $1
RETURNING kind, enabled, config, created_at, updated_at
`

type UpdateConnectorConfigParams struct {
	Kind   string `json:"kind"`
	Config []byte `json:"config"`
}

func (q *Queries) UpdateConnectorConfig(ctx context.Context, arg UpdateConnectorConfigParams) (ConnectorConfig, error) {
	row := q.db.QueryRow(ctx, updateConnectorConfig, arg.Kind, arg.Config)
	var i ConnectorConfig
	err := row.Scan(
		&i.Kind,
		&i.Enabled,
		&i.Config,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateConnectorConfigEnabled = `-- name: UpdateConnectorConfigEnabled :one
UPDATE connector_configs
SET enabled = $2, updated_at = now()
WHERE kind = $1
RETURNING kind, enabled, config, created_at, updated_at
`

type UpdateConnectorConfigEnabledParams struct {
	Kind    string `json:"kind"`
	Enabled bool   `json:"enabled"`
}

func (q *Queries) UpdateConnectorConfigEnabled(ctx context.Context, arg UpdateConnectorConfigEnabledParams) (ConnectorConfig, error) {
	row := q.db.QueryRow(ctx, updateConnectorConfigEnabled, arg.Kind, arg.Enabled)
	var i ConnectorConfig
	err := row.Scan(
		&i.Kind,
		&i.Enabled,
		&i.Config,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const upsertConnectorConfig = `-- name: UpsertConnectorConfig :one
INSERT INTO connector_configs (kind, enabled, config)
VALUES ($1, $2, $3)
ON CONFLICT (kind) DO UPDATE
SET enabled = EXCLUDED.enabled,
    config = EXCLUDED.config,
    updated_at = now()
RETURNING kind, enabled, config, created_at, updated_at
`

type UpsertConnectorConfigParams struct {
	Kind    string `json:"kind"`
	Enabled bool   `json:"enabled"`
	Config  []byte `json:"config"`
}

func (q *Queries) UpsertConnectorConfig(ctx context.Context, arg UpsertConnectorConfigParams) (ConnectorConfig, error) {
	row := q.db.QueryRow(ctx, upsertConnectorConfig, arg.Kind, arg.Enabled, arg.Config)
	var i ConnectorConfig
	err := row.Scan(
		&i.Kind,
		&i.Enabled,
		&i.Config,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
